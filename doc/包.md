# 包

---

### 简介

什么是包? **包 (Packet)** 即为服务端与客户端通信的内容. 在 Escape 中, 服务端会构建一个 JSON 数据发送.

### 格式

一般来讲, Escape 的包 JSON 原始文本看起来应该是这样的: 

``` JSON
{
    "type": "包类型",
    "data": {
        ...
    }
}
```

---

## 参考

### 登录包 (Login)

当客户端连接到服务端时, 那么就会发送一下数据:

``` JSON
{
    "type": "login",
    "data": {
        "account": "dev",
        "password": "dev"
    }
}
```

相对应的, 服务端也会发送数据:

``` JSON
{
    "type": "login",
    "data": {
        "success": true, // 取决于登录是否成功
        "message": "登录成功"
    }
}
```

### 移动包 (Movement)

当客户端**已经进入一个游戏**的前提下, 每一次的移动都将被发送至服务端, 由服务端决定是否分发它:

``` JSON
{
    "type": "movement",
    "data": {
        "x": 0,
        "y": 0
    }
}
```

之后, 服务端会向本场游戏的所有客户端发送TA的移动数据:

``` JSON
{
    "type": "movement",
    "data": {
        "player": "dev",
        "x": 0,
        "y": 0
    }
}
```

但是, 假若你的包发送了一个**被服务端认为不可能的坐标** (与上一次发送的数据作对比, 使用勾股定理计算其移动的距离, 再由服务端的**反作弊**判断), 那么服务端将不会分发它, 相反地, 服务端将会向客户端发送**拉回**数据 _(灵感来源 Minecraft)_:

``` JSON
{
    "type": "movement",
    "data": {
        "x": 0,
        "y": 0
    }
}
```